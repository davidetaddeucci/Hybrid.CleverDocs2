@namespace Hybrid.CleverDocs.WebUI.Components.UI

<div class="cd-card cd-elevation-1 cd-animate-fade-in">
    <div class="flex items-center justify-between">
        <div class="flex-1">
            <p class="cd-body-small text-gray-600 mb-1">@Title</p>
            <p class="cd-headline-medium font-semibold">@Value</p>
            @if (!string.IsNullOrEmpty(Trend))
            {
                <div class="flex items-center mt-2">
                    @if (TrendUp)
                    {
                        <svg class="w-4 h-4 text-green-500 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L10 4.414 4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="cd-label-small text-green-600">@Trend</span>
                    }
                    else
                    {
                        <svg class="w-4 h-4 text-red-500 mr-1" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 10.293a1 1 0 010 1.414l-6 6a1 1 0 01-1.414 0l-6-6a1 1 0 111.414-1.414L10 15.586l5.293-5.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="cd-label-small text-red-600">@Trend</span>
                    }
                </div>
            }
        </div>
        <div class="@GetIconContainerClass()">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                @RenderIcon()
            </svg>
        </div>
    </div>
</div>

@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Value { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "";
    [Parameter] public string Color { get; set; } = "blue";
    [Parameter] public string? Trend { get; set; }
    [Parameter] public bool TrendUp { get; set; } = true;

    private string GetIconContainerClass()
    {
        var baseClass = "w-12 h-12 rounded-lg flex items-center justify-center";
        return Color switch
        {
            "blue" => $"{baseClass} bg-blue-500",
            "green" => $"{baseClass} bg-green-500",
            "purple" => $"{baseClass} bg-purple-500",
            "orange" => $"{baseClass} bg-orange-500",
            "red" => $"{baseClass} bg-red-500",
            "indigo" => $"{baseClass} bg-indigo-500",
            _ => $"{baseClass} bg-gray-500"
        };
    }

    private RenderFragment RenderIcon() => builder =>
    {
        var pathData = Icon.ToLower() switch
        {
            "business" => "M4 4a2 2 0 012-2h8a2 2 0 012 2v12a1 1 0 110 2h-3a1 1 0 01-1-1v-6a1 1 0 00-1-1H9a1 1 0 00-1 1v6a1 1 0 01-1 1H4a1 1 0 110-2V4zm3 1h2v2H7V5zm2 4H7v2h2V9zm2-4h2v2h-2V5zm2 4h-2v2h2V9z",
            "people" => "M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z",
            "folder" => "M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",
            "upload" => "M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",
            "chat" => "M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",
            "analytics" => "M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z",
            _ => "M10 12a2 2 0 100-4 2 2 0 000 4z"
        };
        
        builder.OpenElement(0, "path");
        builder.AddAttribute(1, "d", pathData);
        if (Icon.ToLower() == "business")
        {
            builder.AddAttribute(2, "fill-rule", "evenodd");
            builder.AddAttribute(3, "clip-rule", "evenodd");
        }
        builder.CloseElement();
    };
}