@namespace Hybrid.CleverDocs.WebUI.Components.UI
@inject NavigationManager Navigation

<div class="cd-card cd-elevation-1 hover:cd-elevation-3 transition-all duration-300 cursor-pointer cd-state-layer"
     @onclick="NavigateToAction">
    <div class="text-center">
        <div class="w-16 h-16 bg-gradient-to-br from-purple-500 to-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                @RenderIcon()
            </svg>
        </div>
        
        <h3 class="cd-title-medium mb-2">@Title</h3>
        <p class="cd-body-small text-gray-600 mb-4">@Description</p>
        
        <button class="cd-btn cd-btn-filled cd-state-layer w-full">
            @ActionText
        </button>
    </div>
</div>

@code {
    [Parameter] public string Title { get; set; } = "";
    [Parameter] public string Description { get; set; } = "";
    [Parameter] public string Icon { get; set; } = "";
    [Parameter] public string ActionText { get; set; } = "";
    [Parameter] public string ActionUrl { get; set; } = "";

    private void NavigateToAction()
    {
        if (!string.IsNullOrEmpty(ActionUrl))
        {
            Navigation.NavigateTo(ActionUrl);
        }
    }

    private RenderFragment RenderIcon() => builder =>
    {
        var pathData = Icon.ToLower() switch
        {
            "folder" => "M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",
            "upload" => "M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",
            "chat" => "M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",
            "plus" => "M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",
            _ => "M10 12a2 2 0 100-4 2 2 0 000 4z"
        };
        
        builder.OpenElement(0, "path");
        builder.AddAttribute(1, "d", pathData);
        if (Icon.ToLower() == "upload")
        {
            builder.AddAttribute(2, "fill-rule", "evenodd");
            builder.AddAttribute(3, "clip-rule", "evenodd");
        }
        builder.CloseElement();
    };
}